<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="css/jquery.monthpicker.css">
	<link rel="stylesheet" href="js/bootstrap/css/bootstrap.css">
		<style>
.chartcss {
	width: 600px;
	height: 500px;
}
</style>
</head>


<body>

	<div class="place">
		<span>位置：</span>
		<ul class="placeul">
			<li><a href="#">经济数据分析</a></li>
			<li><a href="#">全区商务楼宇月税收对比分析</a></li>
		</ul>
	</div>
	<div class="rightinfo">
		<ul class="seachform">

			<li style="width: 400px;"><label>统计年月</label><input id="s_month"
				type="text" class="scinput" style="width: 100px;" readonly="readonly" /></li>

			<li style="float: right;"><label>&nbsp;</label><input name=""
				type="button" class="btn btn-info" value="查询" onclick="search()" /></li>

		</ul>
		<div id="content">

			<ul>
				<div id="chart" class="chartcss"></div>
			</ul>
		</div>
	</div>
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="js/echarts.common.min.js"></script>
<script src="js/jquery.monthpicker.js"></script>
<script>
	var now = new Date();
	var month = now.getMonth();
	var year = now.getFullYear();
	month = (month < 10 ? "0" + month : month);
	var mydate = year + "." + month;
	$("#s_month").attr("value", mydate);

	$('#s_month').monthpicker({
		years : [ 2015,2016,2017, 2018, 2019, 2020, 2021, 2022, 2023,2024,2025],
		topOffset : 6
	})
	search();
	function search() {
		var mon = $("#s_month").val();
		if (mon == null || mon == "") {
			alert("请输入统计年月！");
			return;
		}

		$.get("../month_count/all_build_charts", {
			countdate : $('#s_month').val()
		}, function(json) {
			var d = json;
			var taxData = d.taxData;
			var taxStayData = d.taxStayData;
			var rentareaData = d.rentareaData;
			var buildnameData = d.buildnameData;

			initChart(taxData, taxStayData, rentareaData, buildnameData);
		});

	}

	function initChart(taxData, taxStayData, rentareaData, buildnameData) {
		var myChart = echarts.init(document.getElementById("chart"));

		var option = {
			title : {
				text : '全区商务楼宇月税收对比分析',
				x : 'center'
			},
			tooltip : {
				trigger : 'item',
				formatter : "{a} <br/>{b} : {c} ({d}%)"
			},
			
			series : [ {
				name : '',
				type : 'pie',
				radius : '55%',
				center : [ '50%', '60%' ],
				data : taxData,
				itemStyle : {
					emphasis : {
						shadowBlur : 10,
						shadowOffsetX : 0,
						shadowColor : 'rgba(0, 0, 0, 0.5)'
					}
				}
			} ]
		};
		myChart.setOption(option);
	}
</script>
</html>
