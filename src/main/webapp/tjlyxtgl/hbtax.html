<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="css/jquery.monthpicker.css">
<link rel="stylesheet" href="js/bootstrap/css/bootstrap.css">
	<style>
.chartcss {
	width: 600px;
	height: 500px;
}
</style>
</head>


<body>

	<div class="place">
		<span>位置：</span>
		<ul class="placeul">
			<li><a href="#">经济数据分析</a></li>
			<li><a href="#">全区商务楼宇年税收数据分析</a></li>
		</ul>
	</div>

	<div class="rightinfo">
		
				<ul class="seachform">
		
					<li style="width: 400px;"><label>统计年</label>
						<select id="s_month">
							<option value="2015">2015</option>
							<option value="2016">2016</option>
							<option value="2017">2017</option>
							<option value="2018">2018</option>
							<option value="2019">2019</option>
							<option value="2020">2020</option>
							<option value="2021">2021</option>
							<option value="2022">2022</option>
							<option value="2023">2023</option>
							<option value="2022">2024</option>
							<option value="2023">2025</option>
						</select>
					</li>
					
					<li style="float: right;"><label>&nbsp;</label><input name=""
						type="button" class="btn btn-info" value="查询" onclick="search()" /></li>
		
				</ul>
		
		
				<div id="content">
					<ul style="display: block;">
						<div id="chart1" class="chartcss"></div>
					</ul>
					<ul>
						<div id="chart2" class="chartcss"></div>
					</ul>
					
				</div>
			</div>
	
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="js/echarts.common.min.js"></script>
<script src="js/jquery.monthpicker.js"></script>
<script>

var now = new Date();
var year = now.getFullYear();
$("#s_month").find("option[value='" + year + "']").attr("selected",true);
search();
function search() {
	var mon = $("#s_month").val();
	if (mon == null || mon == "") {
		alert("请输入统计年！");
		return;
	}

	$.get("../month_count/tjhb_charts", {
		countdate : $('#s_month').val()
	}, function(json) {
		var d = json;
		var months = d.months;
		var taxData = d.taxData;
		var taxStayData = d.taxStayData;
		var rentareaData = d.rentareaData;
		
		initChart(months, taxData, taxStayData, rentareaData);
	});
	
	$.get("../month_count/builds_tax_charts", {
		countdate : $('#s_month').val()
	}, function(json) {
		var d = json;
		var taxData = d.taxData;
		var taxStayData = d.taxStayData;
		var rentareaData = d.rentareaData;
		var buildnameData = d.buildnameData;
		
		initChart1(taxData, taxStayData, rentareaData,buildnameData);
	});
	
}

function initChart(months, taxData, taxStayData, rentareaData) {
		var myChart1 = echarts.init(document.getElementById("chart1"));

		option1 = {
			tooltip : {
				trigger: 'axis',
				axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				}
			},
			legend: {
				data:['总税收','留区税收']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			xAxis : [
				{
					type : 'category',
					data : months
				}
			],
			yAxis : [
				{
					type : 'value'
				}
			],
			series : [
				{
					name:'总税收',
					type:'bar',
					stack: '税收',
					data:taxData
				},
				{
					name:'留区税收',
					type:'bar',
					stack: '税收',
					data:taxStayData
				}
			  
			]
		};

		myChart1.setOption(option1);
}

function initChart1(taxData, taxStayData, rentareaData,buildnameData) {
	var myChart2 = echarts.init(document.getElementById("chart2"));

	
	var option = {
		title : {
			text: '全区商务楼宇年税收数据对比分析',
			x:'center'
		},
		tooltip : {
			trigger: 'item',
			formatter: "{a} <br/>{b} : {c} ({d}%)"
		},
		series : [
			{
				name: '',
				type: 'pie',
				radius : '55%',
				center: ['50%', '60%'],
				data:taxData,
				itemStyle: {
					emphasis: {
						shadowBlur: 10,
						shadowOffsetX: 0,
						shadowColor: 'rgba(0, 0, 0, 0.5)'
					}
				}
			}
		]
	};
	
	myChart2.setOption(option);
}
</script>
</html>
