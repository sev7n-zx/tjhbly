<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="css/jquery.monthpicker.css">
<link rel="stylesheet" href="js/bootstrap/css/bootstrap.css">
	<style>
* {
	margin: 0;
	padding: 0;
}

body, ul, li {
	margin: 0;
	padding: 0;
}

#outer {
	width: 800px;
	margin: 10px auto;
}

#tab {
	overflow: hidden;
	zoom: 1;
}

#tab li {
	float: left;
	color: #fff;
	height: 120px;
	cursor: pointer;
	line-height: 30px;
	list-style-type: none;
	padding: 10px 20px 0 20px;
}

#tab li image {
	height: 50px;
	width: 50px;
}

#tab li.current {
	color: #000;
	background: #00FFB3;
}

#content {
	border: 1px solid #000;
	border-top-width: 0;
}

#content ul {
	line-height: 25px;
	display: none;
	margin: 0 30px;
	padding: 10px 0;
}

.chartcss {
	width: 600px;
	height: 500px;
}
</style>
</head>


<body>

	<div class="place">
		<span>位置：</span>
		<ul class="placeul">
			<li><a href="#">经济数据分析</a></li>
			<li><a href="#">单座商务楼宇产业分析</a></li>
		</ul>
	</div>

	<div class="rightinfo">

		<ul class="seachform">

			<li style="width: 400px;"><label>统计年月</label><input id="s_month"
				type="text" class="scinput" style="width: 100px;" /></li>
			<li style="width: 400px;"><label style="padding-left: 21px;">商务楼宇名称</label><input
				id="s_buildname" type="text" class="scinput" style="width: 100px;" />
				<input id="s_buildid" type="hidden" /> <input type="button"
				class="btn btn-info" value="选择商务楼宇" onclick="showLYGrid()"></input></li>
			<li style="float: right;"><label>&nbsp;</label><input name=""
				type="button" class="btn btn-info" value="查询" onclick="search()" /></li>

		</ul>


		<div id="outer">
			<ul id="tab">
				<li class="current"><image src="images/tab1.png"
						style="width:100px;height:120px;" /></li>
				<li><image src="images/tab2.png" style="width:100px;" /></li>
				<li><image src="images/tab3.png" style="width:100px;" /></li>
			</ul>
			<div id="content">
				<ul style="display: block;">
					<div id="chart1" class="chartcss"></div>
				</ul>
				<ul>
					<div id="chart2" class="chartcss"></div>
				</ul>
				<ul>
					<div id="chart3" class="chartcss"></div>
				</ul>
			</div>
		</div>
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="js/echarts.common.min.js"></script>
<script src="js/jquery.monthpicker.js"></script>
<script>
	$('#s_month').monthpicker({
		years : [ 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025 ],
		topOffset : 6
	})
	function showLYGrid() {
		var iWidth = 1000;
		var iHeight = 600;
		var iTop = (window.screen.availHeight - 30 - iHeight) / 2;
		var iLeft = (window.screen.availWidth - 10 - iWidth) / 2;
		var win = window.open("lygrid.html", "弹出窗口", "width=" + iWidth
				+ ", height=" + iHeight + ",top=" + iTop + ",left=" + iLeft);
	}

	function transferValue(value) {
		var ly = value.split(",");
		$("#s_buildid").prop("value", ly[0]);
		$("#s_buildname").prop("value", ly[1]);
	}

	function search() {
		var mon = $("#s_month").val();
		var build = $("s_buildid").val();
		if (mon == null || mon == "") {
			alert("请输入统计月份");
			return;
		}
		if (build == null || build == "") {
			alert("请输入统计楼宇");
			return;
		}
		$.get("../month_count/build_industry", {
			countdate : $('#s_month').val(),
			buildid : $('#s_buildid').val()
		}, function(json) {
			var d = json;
			var months = d.months;
			var taxServices = d.taxServices;
			var taxData = d.taxData;
			var incomeServices = d.incomeServices;
			var incomeData = d.incomeData;
			var workmannumServices = d.workmannumServices;
			var workmannumDate = d.workmannumDate;

			initChart(months, taxServices, taxData, incomeServices, incomeData,
					workmannumServices, workmannumDate);
		});
	}

	function initChart(months, taxServices, taxData, incomeServices,
			incomeData, workmannumServices, workmannumDate) {
		var myChart1 = echarts.init(document.getElementById("chart1"));
		var myChart2 = echarts.init(document.getElementById("chart2"));
		var myChart3 = echarts.init(document.getElementById("chart3"));

		option1 = {
			title : {
				text : '单座商务楼宇营收前五行业（月度）变化情况'
			},
			tooltip : {
				trigger : 'axis'
			},
			legend : {
				orient: 'vertical', 
				x:350,
				data : incomeServices
			},
			toolbox : {
				show : true,
				feature : {
					mark : {
						show : true
					},
					dataView : {
						show : true,
						readOnly : false
					},
					magicType : {
						show : true,
						type : [ 'line', 'bar' ]
					},
					restore : {
						show : true
					},
					saveAsImage : {
						show : true
					}
				}
			},
			calculable : true,
			xAxis : [ {
				type : 'category',
				boundaryGap : false,
				data : months
			} ],
			yAxis : [ {
				type : 'value',
				axisLabel : {
					formatter : '{value}元'
				}
			} ],
			series : [ {
				name : incomeServices[0],
				type : 'line',
				data : incomeData[0]
			}, {
				name : incomeServices[1],
				type : 'line',
				data : incomeData[1]
			}, {
				name : incomeServices[2],
				type : 'line',
				data : incomeData[2]
			}, {
				name : incomeServices[3],
				type : 'line',
				data : incomeData[3]
			}, {
				name : incomeServices[4],
				type : 'line',
				data : incomeData[4]
			} ]
		};

		option2 = {
			title : {
				text : '单座商务楼宇纳税前五行业（月度）变化情况'
			},
			tooltip : {
				trigger : 'axis'
			},
			legend : {
				orient: 'vertical', 
				x:350,
				data : taxServices
			},
			toolbox : {
				show : true,
				feature : {
					mark : {
						show : true
					},
					dataView : {
						show : true,
						readOnly : false
					},
					magicType : {
						show : true,
						type : [ 'line', 'bar' ]
					},
					restore : {
						show : true
					},
					saveAsImage : {
						show : true
					}
				}
			},
			calculable : true,
			xAxis : [ {
				type : 'category',
				boundaryGap : false,
				data : months
			} ],
			yAxis : [ {
				type : 'value',
				axisLabel : {
					formatter : '{value} 元'
				}
			} ],
			series : [ {
				name : taxServices[0],
				type : 'line',
				data : taxData[0]
			}, {
				name : taxServices[1],
				type : 'line',
				data : taxData[1]
			}, {
				name : taxServices[2],
				type : 'line',
				data : taxData[2]
			}, {
				name : taxServices[3],
				type : 'line',
				data : taxData[3]
			}, {
				name : taxServices[4],
				type : 'line',
				data : taxData[4]
			} ]
		};

		option3 = {
			title : {
				text : '单座商务楼宇从业人数前五行业（月度）变化情况'
			},
			tooltip : {
				trigger : 'axis'
			},
			legend : {
				orient: 'vertical', 
				x:350,
				data : workmannumServices
			},
			toolbox : {
				show : true,
				feature : {
					mark : {
						show : true
					},
					dataView : {
						show : true,
						readOnly : false
					},
					magicType : {
						show : true,
						type : [ 'line', 'bar' ]
					},
					restore : {
						show : true
					},
					saveAsImage : {
						show : true
					}
				}
			},
			calculable : true,
			xAxis : [ {
				type : 'category',
				boundaryGap : false,
				data : months
			} ],
			yAxis : [ {
				type : 'value',
				axisLabel : {
					formatter : '{value}元'
				}
			} ],
			series : [ {
				name : workmannumServices[0],
				type : 'line',
				data : workmannumDate[0]
			}, {
				name : workmannumServices[1],
				type : 'line',
				data : workmannumDate[1]
			}, {
				name : workmannumServices[2],
				type : 'line',
				data : workmannumDate[2]
			}, {
				name : workmannumServices[3],
				type : 'line',
				data : workmannumDate[3]
			}, {
				name : workmannumServices[4],
				type : 'line',
				data : workmannumDate[4]
			} ]
		};
		myChart1.setOption(option1);
		myChart2.setOption(option2);
		myChart3.setOption(option3);
	}

	$(function() {
		window.onload = function() {
			var $li = $('#tab li');
			var $ul = $('#content ul');
			$li.click(function() {
				$li.removeClass();
				var $t = $(this).index();
				$(this).addClass('current');
				$ul.css('display', 'none');
				$ul.eq($t).css('display', 'block');
			})
		}
	});
</script>
</html>
